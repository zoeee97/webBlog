import{_ as a,X as n,Y as s,Z as t}from"./framework-1e167b4e.js";const p={},e=t(`<h1 id="html非插件实现pdf预览功能【pc-h5】" tabindex="-1"><a class="header-anchor" href="#html非插件实现pdf预览功能【pc-h5】" aria-hidden="true">#</a> html非插件实现pdf预览功能【PC+H5】</h1><blockquote><p>这里只考虑非插件以外的方法，插件可以参考pdf.js</p></blockquote><h3 id="_1-iframe标签" tabindex="-1"><a class="header-anchor" href="#_1-iframe标签" aria-hidden="true">#</a> 1. iframe标签</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/file/read?file=aaa&amp;type=upload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>800px<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>经测试，chrome正常显示，firefox不能显示，H5不能显示。</p><h3 id="_2-object标签" tabindex="-1"><a class="header-anchor" href="#_2-object标签" aria-hidden="true">#</a> 2. object标签</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/file/read?file=aaa&amp;type=upload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>application/pdf<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>450<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pdfdownload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/file/download?file=aaa&amp;type=upload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击查看场景详情介绍<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 或者这样
&lt;object data=&quot;/file/read?file=aaa&amp;type=upload&quot; type=&quot;application/pdf&quot; width=&quot;100%&quot; height=&quot;450&quot;&gt;
     &lt;embed src=&quot;/file/read?file=aa&amp;type=upload&quot; type=&quot;application/pdf&quot; height=&quot;460&quot; width=&quot;100%&quot;&gt;
&lt;/object&gt;
--&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>data 属性指定 PDF 文件的路径，type 属性标识文件类型为 PDF。如果未显示 object 元素，就会执行位于 <object> 和 </object> 之间的代码。因此，当浏览器无法加载该object标签时，用户就可以通过a标签提供的链接下载文件。 经测试，chrome正常显示，firefox不能显示，H5不能显示。</p><h3 id="_3-embed标签" tabindex="-1"><a class="header-anchor" href="#_3-embed标签" aria-hidden="true">#</a> 3. embed标签</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embed</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/file/read?file=aa&amp;type=upload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>application/pdf<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>460<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>经测试，chrome正常显示，firefox正常显示，H5可以显示【但尚未真机测验过】。</p><h3 id="_4-a标签点击预览pdf" tabindex="-1"><a class="header-anchor" href="#_4-a标签点击预览pdf" aria-hidden="true">#</a> 4.a标签点击预览pdf</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>//该接口1 后端设置Content-Disposition为attachment
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/file/download?file=aaa&amp;type=upload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击查看场景详情介绍<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
//该接口2 后端没有特别设置Content-Disposition
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/file/read?file=aaa&amp;type=upload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击查看场景详情介绍<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于接口1，经真机测验，在H5移动端中，部分浏览器，如chrome、safari、firefox可以实现点击a标签预览pdf文件；但部分浏览器，如qq浏览器、微信内置浏览器会弹出下载pdf文件的提示。 但在pc中则均默认为下载pdf。</p><p><strong>原因</strong>： 1.h5部分浏览器可以实现pdf预览，部分浏览器则弹窗提示下载，可能的原因是前者这些浏览器中内置了pdf预览插件 2.pc中均默认为下载，与请求头中的Content-Disposition有关。</p><p>content-type 指示响应内容的格式。</p><p>content-disposition 指示如何处理响应内容。</p><p>根据请求的路径不同，后端给请求头的Content-Disposition设置了不同的值，当值为attachment时，表示将响应内容作为附件下载；为inline时【默认值】，表示它可以显示在网页内，或作为网页，此时浏览器会自动进行预览。</p>`,18),o=[e];function l(c,u){return n(),s("div",null,o)}const r=a(p,[["render",l],["__file","html非插件实现pdf预览功能【PC_H5】.html.vue"]]);export{r as default};
