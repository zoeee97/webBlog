import{_ as n,X as s,Y as a,Z as t}from"./framework-1e167b4e.js";const p="/webBlog/assets/23-06-07-80c823fa.png",o={},e=t('<h1 id="layui关于table组件如何设置分页跳转后的页面锚点" tabindex="-1"><a class="header-anchor" href="#layui关于table组件如何设置分页跳转后的页面锚点" aria-hidden="true">#</a> layUI关于table组件如何设置分页跳转后的页面锚点</h1><h2 id="场景描述" tabindex="-1"><a class="header-anchor" href="#场景描述" aria-hidden="true">#</a> 场景描述</h2><p>今天接到的需求是让所有分页器分页跳转时，页面锚点定位到指定位置。项目是用layui写的前端，然后在看项目代码时发现，代码中的分页器有些是直接用table组件，设置page:true开启分页；有些则是用的laypage组件。对于后者的情况很简单，就是在jump配置项里去写回调函数的逻辑即可，但是前者就有点麻烦，这是因为虽然table的page配置项支持传入一些laypage组件的属性，但并不支持传入jump。</p><h2 id="问题解决" tabindex="-1"><a class="header-anchor" href="#问题解决" aria-hidden="true">#</a> 问题解决</h2><p>考虑过两种解决方法： 1.把table组件里的page直接改成用laypage组件去写，然后再在jump里改。 但是这种方法太麻烦，代码量多的情况下涉及的改动也就特别多，加上前端很多页面都用到了带分页的table，这样要重新写的地方很多。 2.利用table组件的done/before配置项。 仔细看layui文档会发现，它有两个回调函数配置项： <img src="'+p+`" alt="在这里插入图片描述" loading="lazy"> 鉴于需求是在数据渲染之前就让页面锚点跳转，因此我需要在before函数里去书写跳转逻辑。 但是问题又来了，页面初始渲染时，我当然不希望此时的锚点就会跳转到表头（因为在表格部分之前还有其余页面内容）。 而文档对于before函数里的参数又没有描述，因此这个时候我们可以去打印一下before函数的arguments。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//页面初始渲染时的打印结果：</span>
arguments <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;loading&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;escape&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;cellMinWidth&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;cellMaxWidth&quot;</span><span class="token operator">:</span> <span class="token number">1.7976931348623157e+308</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;editTrigger&quot;</span><span class="token operator">:</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;defaultToolbar&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;defaultContextmenu&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;autoSort&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;none&quot;</span><span class="token operator">:</span> <span class="token string">&quot;无数据&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;cols&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token operator">...</span><span class="token punctuation">.</span>
      <span class="token comment">//这里是表头数据</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;checkName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LAY_CHECKED&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;indexName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LAY_INDEX&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;numbersName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LAY_NUM&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;disabledName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LAY_DISABLED&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;elem&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;0&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;length&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;context&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;ancestorOrigins&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;href&quot;</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;origin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;protocol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http:&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;hostname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;pathname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;search&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;jQuery1124042153479686134987&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#talent_table&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/api/plan&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;pageName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;page&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;limitName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;limit&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;response&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;statusName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;statusCode&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;msgName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;dataName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;totalRowName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;totalRow&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;countName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;count&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token number">1200</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;toolbar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#toolbar&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;where&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;year&quot;</span><span class="token operator">:</span> <span class="token number">2023</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;degree&quot;</span><span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;talent_table&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;clientWidth&quot;</span><span class="token operator">:</span> <span class="token number">1200</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>切换页码之后再打印一次arguments，会发现其余项基本没有变动，但page项从true变成了一个对象：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>    <span class="token string-property property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;elem&quot;</span><span class="token operator">:</span> <span class="token string">&quot;layui-table-page1&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;count&quot;</span><span class="token operator">:</span> 总条数<span class="token punctuation">,</span>
      <span class="token string-property property">&quot;limit&quot;</span><span class="token operator">:</span> 每页显示条数<span class="token punctuation">,</span>
      <span class="token string-property property">&quot;limits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;groups&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;layout&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;prev&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;page&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;next&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;skip&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;limit&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;prev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;i class=\\&quot;layui-icon\\&quot;&gt;&amp;#xe603;&lt;/i&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;next&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;i class=\\&quot;layui-icon\\&quot;&gt;&amp;#xe602;&lt;/i&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;index&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;curr&quot;</span><span class="token operator">:</span> 当前页码<span class="token punctuation">,</span>
      <span class="token string-property property">&quot;pages&quot;</span><span class="token operator">:</span> 总页数
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因此可以利用这一点去做一些判断，从而书写我们需要的锚点逻辑。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function-variable function">before</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//如果是对象，说明已经切换过页码了</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>page <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//这部分是因为有顶部固定导航栏，因此要减去这部分</span>
   <span class="token keyword">let</span> headerHeight <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.header-content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>offsetHeight
   <span class="token keyword">let</span> offsetTop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#pageScroll&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>offsetTop <span class="token operator">-</span> headerHeight
   window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     <span class="token literal-property property">top</span><span class="token operator">:</span> offsetTop<span class="token punctuation">,</span>
     <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">&quot;instant&quot;</span><span class="token comment">//立即跳转</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),r=[e];function c(l,u){return s(),a("div",null,r)}const k=n(o,[["render",c],["__file","layUI关于table组件设置分页跳转后的页面锚点.html.vue"]]);export{k as default};
